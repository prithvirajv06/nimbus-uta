<div class="relative inline-block w-full">
    <div class="relative cursor-pointer" (click)="showDropdown = !showDropdown">
        <input type="text" readonly
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
            [placeholder]="placeholder" [value]="getLabelForValue(value())" />
        <i class="fas fa-caret-down absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-300"></i>
    </div>
    @if (showDropdown) {
    <div class="absolute mt-1 w-fit bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-10" appClickOutside (clickOutside)="showDropdown = false">
        <div class="relative p-2 flex items-center">
            <input type="text"
                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="Search..." [(ngModel)]="searchTerm" (ngModelChange)="onSearchTermChange()" />
            <i class="fas fa-search absolute right-3 top-8 transform -translate-y-1/2 text-gray-400 dark:text-gray-300"></i>
        </div>
        @if (filterOptions.length>0) {
        <div class="max-h-60 overflow-y-auto border border-gray-300 dark:border-gray-700 rounded mt-2 bg-white dark:bg-gray-900">
            @for (option of filterOptions; track $index) {
            <div class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer text-gray-900 dark:text-gray-100" (click)="value.set(option.value); showDropdown = false;">
                {{ option.label }}
            </div>
            }
        </div>
        }
    </div>
    }
</div>